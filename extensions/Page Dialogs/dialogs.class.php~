<?php
class PageDialogs {

    private static $preinstalled = Array();

    public static function dumpPreinstalledDialogs(){
        foreach(self::$preinstalled as $page => $val) {
            echo "<div class='popup preload hidden' preload-page='" . htmlspecialchars($page). "'><close onclick='closeLastPopup()'>X</close><div class='content'>";
            $module = new PageModule($page);
            $module->run(true, true);
            echo $module->getHTML();
            echo "</div></div>";
        }
    }

    public static function preinstall($page){
        self::$preinstalled[relativepath($page)] = true;
        Template::addFooter(Array(__CLASS__, "dumpPreinstalledDialogs"));
    }

}
?>
